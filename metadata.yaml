name: astrbot_plugin_context_aware
display_name: 上下文场景感知增强
desc: 增强 LLM 对群聊场景的理解能力，让 Bot 知道谁在和谁说话、当前是主动搭话还是被动回复
help: |
  本插件通过分析群聊消息结构，为 LLM 提供结构化的场景描述，包括：
  - 触发类型：被@、被回复、唤醒词、主动搭话等
  - 对话对象：当前消息是对谁说的（关键功能）
  - 对话流：最近的对话结构和走向
  - Bot状态：上次发言时间

  v2.2 更新：
  - 增强日志输出，每次场景注入都会记录
  - 添加统计信息，可在终止时看到汇总
  - 日志格式：[ContextAware] ✓ 场景注入 #N | 触发: XXX | 发送者 → 接收者

  v2.1 重点解决的问题：
  - 主动回复时 Bot 误以为别人的问题是问自己的
  - 当 A 在和 B 对话时，Bot 不再错误地抢答
  - 提供明确的行为指导，告诉 LLM 什么时候该回应、什么时候该旁观

  特点：
  - 纯规则分析，零额外 LLM 调用
  - 只做加法，不修改框架原有信息
  - 与框架 LongTermMemory 完美协作
  - 轻量快速，不影响响应速度

  配置说明请查看插件配置页面。
version: 2.2.2
author: 木有知
repo: https://github.com/muyouzhi6/astrbot_plugin_context_aware
